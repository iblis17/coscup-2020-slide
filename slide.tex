\documentclass[aspectratio=169]{beamer}

\usetheme{Berlin}

\usepackage{textcomp}

% Chinese typesetting
\usepackage{xeCJK}
\setCJKmainfont{HanWangWCL06}
\setmainfont{Fira Code}

\title{The Ports Framework Workshop}
\author{Iblis Lin \textlangle{}iblis@hs.ntnu.edu.tw\textrangle{}}

\setbeamertemplate{footline}[frame number]

\begin{document}


\begin{frame}
  \titlepage
\end{frame}

\begin{frame}[t]{Introduction}
  名詞介紹
  \begin{itemize}
    \item Ports
    \item Ports Collection
    \item Ports tree
  \end{itemize}
\end{frame}

\begin{frame}[t,fragile]{Resources}
  \begin{itemize}
    \item \href{https://www.freebsd.org/doc/en_US.ISO8859-1/books/porters-handbook/book.html}{Porter's Handbook}
    \item \verb|/usr/ports/|
      \begin{itemize}
        \item \verb|Mk/bsd.port.mk|
      \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}[t,fragile]{Topics}
  \begin{itemize}
    \item Making a new port
      \begin{itemize}
        \item Dir structure
      \end{itemize}
    \item Upgrading a port
  \end{itemize}
\end{frame}

\section{Making a New Port}
\subsection{Dir}
\begin{frame}[t,fragile]{Dir structure}
  \begin{itemize}
    \item Ports framework 本身是由一大堆的 \verb|Makefile| 堆砌而成
    \item 東西長在 \verb|/usr/ports/Mk/*|
    \item 一個簡單的範例 \verb|ports-mgmt/porttools|
  \end{itemize}

  \begin{verbatim}
  └─[iblis@GaeBuidhe]% find ports-mgmt/porttools
  ports-mgmt/porttools
  ports-mgmt/porttools/pkg-plist
  ports-mgmt/porttools/pkg-descr
  ports-mgmt/porttools/distinfo
  ports-mgmt/porttools/Makefile
  \end{verbatim}
\end{frame}

\subsection{porttools}
\begin{frame}[t,fragile]{Getting Started with ports-mgmt/porttools}
  \verb|% port create foo|

  \begin{block}{A Minimal Makefile} \begin{verbatim}
PORTNAME=       foo
DISTVERSION=
CATEGORIES=     devel
MASTER_SITES=

MAINTAINER=     you@host
COMMENT=

.include <bsd.port.mk> \end{verbatim}
  \end{block}
\end{frame}

\begin{frame}[t,fragile]{Getting Started with ports-mgmt/porttools}
  \begin{itemize}
    \item \verb|make -V| 方便 debug
    \item E.g \verb|make -V PORTNAME|
  \end{itemize}
\end{frame}

\begin{frame}[t]{Makefile}
  \begin{itemize}
    \item Port framework 定義了 build 一個 port 所需要的 make target
    \item 每個 target 都還會有，pre-<target> 跟 post-<target> hooks 可以使用
  \end{itemize}
  \begin{enumerate}
    \item fetch
    \item extract
    \item patch
    \item configure
    \item build
    \item stage
    \item package
    \item install
  \end{enumerate}
\end{frame}

\section{Updating a Port}
\begin{frame}[t]{TBD}
  t
\end{frame}

\end{document}
